"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireDefault(require("react"));

var _styledComponents = require("styled-components");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = function _default(options) {
  return {
    // Use beforeRenderToHtml to extract the styles into the page meta
    beforeRenderToComponent: function beforeRenderToComponent(App, _ref) {
      var meta = _ref.meta;
      meta.styleComponentsSheet = new _styledComponents.ServerStyleSheet();
      return function (props) {
        return _react.default.createElement(_styledComponents.StyleSheetManager, {
          sheet: meta.styleComponentsSheet.instance
        }, _react.default.createElement(App, props));
      };
    },
    Head: function Head(_ref2) {
      var meta = _ref2.meta;
      return (// The styles aren't fully extraced until the react component
        // has been rendered to an html string. So we wait until the head
        // to call the sheet's getStyleElement function
        // and then insert the tag into the Head
        meta.styleComponentsSheet.getStyleElement()
      );
    }
  };
};

exports.default = _default;

